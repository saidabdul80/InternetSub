import{d as z,u as A,a as D,c as r,b as n,e as o,h as H,w as u,f as t,g as m,r as V,i,t as d,o as l,j as U,n as h,F as w,k as C,l as R,v as L}from"./app-lFc9bZkn.js";import{_ as f}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DmtVYiFq.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-BcM3Kyxs.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-Cu-rz8sm.js";import{i as F,_ as O,u as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-D9SZwJgE.js";import"./index-3yjOgHto.js";import"./useForwardExpose-CcDkd_2j.js";import"./VisuallyHidden-C6SQxswu.js";import"./useForwardPropsEmits-DcCOKBlq.js";import"./index-oviKqIGH.js";import"./createLucideIcon-BjrwMSK0.js";const E={class:"space-y-8 p-4"},I={class:"rounded-2xl transition-all mb-3"},J={class:"flex flex-wrap items-center justify-between gap-4"},X={class:"ml-2"},G={class:"ml-2"},K={key:0,class:"mt-6 space-y-6 shadow-sm p-3"},Q={class:"space-y-4"},W={class:"mt-2"},Y={key:0,class:"mt-2 text-sm text-destructive"},Z={class:"flex items-center gap-3"},tt={key:0},et={key:1},st={key:0,class:"text-sm text-muted-foreground"},ot={key:0,class:"rounded-2xl border bg-card p-6 shadow-sm"},dt={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},rt={class:"flex items-start justify-between"},lt={class:"flex items-center gap-2"},nt={class:"rounded-full bg-primary/10 px-3 py-1 text-xs font-medium text-primary"},at={class:"mt-3 text-lg font-semibold"},it={class:"mt-2 text-2xl font-bold"},ut={class:"rounded-2xl border bg-card p-6 shadow-sm"},ct={class:"flex flex-wrap items-center justify-between gap-4"},pt={class:"inline-flex rounded-lg border p-1"},mt={class:"ml-2 rounded-full bg-primary/20 px-2 py-0.5 text-xs"},ft={class:"ml-2 rounded-full bg-primary/20 px-2 py-0.5 text-xs"},xt={key:0,class:"mt-8"},_t={class:"mb-6 rounded-lg border bg-muted/30 p-4"},vt={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},gt={class:"space-y-2"},yt={class:"space-y-2"},ht={class:"space-y-2"},bt={class:"space-y-2"},wt={class:"flex items-center gap-3"},kt={class:"overflow-hidden rounded-xl border"},Vt={class:"overflow-x-auto"},Ct={class:"w-full min-w-[900px]"},Ft={class:"divide-y"},Pt={class:"px-6 py-4"},St={class:"font-mono text-sm font-medium"},At={class:"px-6 py-4"},Ut={class:"text-sm"},jt={class:"px-6 py-4"},Nt={class:"space-y-1"},$t={class:"font-medium"},Mt={class:"text-sm text-muted-foreground"},Tt={class:"font-medium"},Bt={class:"px-6 py-4"},zt={class:"px-6 py-4"},Dt={class:"space-y-1"},Ht={class:"font-mono text-sm"},Rt={key:0,class:"text-xs text-muted-foreground"},Lt={class:"px-6 py-4"},Ot={class:"text-sm"},qt={class:"text-xs text-muted-foreground"},Et={key:0},It={key:1,class:"mt-8"},Jt={class:"overflow-hidden rounded-xl border"},Xt={class:"overflow-x-auto"},Gt={class:"w-full min-w-[900px]"},Kt={class:"divide-y"},Qt={class:"px-6 py-4"},Wt={class:"font-mono font-medium"},Yt={class:"px-6 py-4"},Zt={class:"space-y-1"},te={class:"font-medium"},ee={class:"text-sm text-muted-foreground"},se={class:"px-6 py-4"},oe={class:"px-6 py-4"},de={class:"space-y-1"},re={class:"font-mono text-sm"},le={key:0,class:"text-xs text-muted-foreground"},ne={class:"px-6 py-4"},ae={class:"space-y-2"},ie={class:"text-sm"},ue={class:"text-sm"},ce={class:"text-xs text-muted-foreground"},pe={key:0},Ce=z({__name:"Index",props:{plans:{},payments:{},vouchers:{},filters:{}},setup(j){const c=j,N=[{title:"Voucher Admin",href:F().url}],p=A({file:null}),a=A({phone_number:c.filters.phone_number??"",status:c.filters.status??"",date_from:c.filters.date_from??"",date_to:c.filters.date_to??""}),x=D().props.flash,_=V(!1),v=V(!1),y=V("payments"),$=g=>{const e=g.target;p.file=e.files?e.files[0]:null},M=()=>{p.file&&p.post(q().url,{forceFormData:!0,preserveScroll:!0,onFinish:()=>p.reset("file")})},P=(g,e)=>{const s=g/100;return`${e} ${s.toFixed(2)}`},S=g=>{const e=g.toLowerCase();return e.includes("success")||e.includes("completed")||e==="used"?"bg-green-100 text-green-800 border-green-200":e.includes("pending")||e==="reserved"?"bg-yellow-100 text-yellow-800 border-yellow-200":e.includes("failed")||e.includes("cancelled")?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"},T=()=>{a.get(F().url,{preserveScroll:!0,preserveState:!0,replace:!0})},B=()=>{a.phone_number="",a.status="",a.date_from="",a.date_to="",a.get(F().url,{preserveScroll:!0,replace:!0})};return(g,e)=>(l(),r(w,null,[n(o(H),{title:"Voucher Admin"}),n(O,{breadcrumbs:N},{default:u(()=>[t("div",E,[t("div",I,[t("div",J,[t("div",null,[n(o(f),{type:"button",variant:v.value?"secondary":"default",onClick:e[0]||(e[0]=s=>v.value=!v.value),class:"transition-all duration-200"},{default:u(()=>[i(d(v.value?"Hide Plans":"Show Plans")+" ",1),t("span",X,d(v.value?"−":"+"),1)]),_:1},8,["variant"])]),n(o(f),{type:"button",variant:_.value?"secondary":"default",onClick:e[1]||(e[1]=s=>_.value=!_.value),class:"transition-all duration-200"},{default:u(()=>[i(d(_.value?"Hide Upload":"Upload Vouchers")+" ",1),t("span",G,d(_.value?"−":"+"),1)]),_:1},8,["variant"])]),_.value?(l(),r("div",K,[e[10]||(e[10]=t("div",{class:"rounded-lg bg-gray-200 p-4"},[t("h3",{class:"font-medium"},"File Format Requirements"),t("div",{class:"mt-3 grid gap-4 sm:grid-cols-2"},[t("div",{class:"space-y-2"},[t("p",{class:"text-sm font-medium"},"CSV/TXT Format:"),t("code",{class:"block rounded bg-background px-3 py-2 text-sm font-mono"}," code,plan_type ")]),t("div",{class:"space-y-2"},[t("p",{class:"text-sm font-medium"},"JSON Format:"),t("code",{class:"block rounded bg-background px-3 py-2 text-sm font-mono"},' [{ "code": "0066983371", "plan_type": 1 }] ')])])],-1)),t("form",{class:"space-y-6",onSubmit:U(M,["prevent"])},[t("div",Q,[t("div",null,[n(o(b),{for:"voucher-file",class:"text-base"},{default:u(()=>[...e[8]||(e[8]=[i("Select File",-1)])]),_:1}),t("div",W,[n(o(k),{id:"voucher-file",type:"file",accept:".csv,.json,.txt",onChange:$,class:"cursor-pointer file:mr-4 file:rounded file:border-0 file:bg-primary file:px-4 file:py-2 file:text-primary-foreground file:cursor-pointer hover:file:bg-primary/90"})]),o(p).errors.file?(l(),r("p",Y,d(o(p).errors.file),1)):m("",!0)]),o(x)?.error||o(x)?.success?(l(),r("div",{key:0,class:h(["rounded-lg border p-4",o(x).error?"border-destructive/20 bg-destructive/5":"border-green-200 bg-green-50"])},[t("p",{class:h(["font-medium",o(x).error?"text-destructive":"text-green-800"])},d(o(x).error||o(x).success),3)],2)):m("",!0)]),t("div",Z,[n(o(f),{disabled:o(p).processing||!o(p).file,class:h(["min-w-[120px] transition-all duration-200",o(p).file?"hover:shadow-md":""])},{default:u(()=>[o(p).processing?(l(),r("span",tt,[...e[9]||(e[9]=[t("svg",{class:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),i(" Uploading... ",-1)])])):(l(),r("span",et,"Upload File"))]),_:1},8,["disabled","class"]),o(p).file?m("",!0):(l(),r("p",st," Select a file to begin upload "))])],32)])):m("",!0)]),v.value?(l(),r("div",ot,[e[11]||(e[11]=t("div",{class:"mb-6"},[t("h2",{class:"text-xl font-semibold"},"Available Plans"),t("p",{class:"mt-1 text-sm text-muted-foreground"}," Overview of all subscription plans ")],-1)),t("div",dt,[(l(!0),r(w,null,C(c.plans,s=>(l(),r("div",{key:s.plan_type,class:"group rounded-xl border border-border bg-background p-5 transition-all duration-200 hover:border-primary/50 hover:shadow-md"},[t("div",rt,[t("div",null,[t("div",lt,[t("span",nt," Plan "+d(s.plan_type),1)]),t("h3",at,d(s.name),1),t("p",it,d(P(s.amount,s.currency)),1)])])]))),128))])])):m("",!0),t("div",ut,[t("div",ct,[e[14]||(e[14]=t("div",null,[t("h2",{class:"text-xl font-semibold"},"Recent Activity"),t("p",{class:"mt-1 text-sm text-muted-foreground"}," Monitor payments and voucher usage in real-time ")],-1)),t("div",pt,[n(o(f),{type:"button",variant:y.value==="payments"?"default":"ghost",onClick:e[2]||(e[2]=s=>y.value="payments"),class:"rounded-md px-4 py-2 transition-all duration-200"},{default:u(()=>[e[12]||(e[12]=i(" Payments ",-1)),t("span",mt,d(c.payments.length),1)]),_:1},8,["variant"]),n(o(f),{type:"button",variant:y.value==="vouchers"?"default":"ghost",onClick:e[3]||(e[3]=s=>y.value="vouchers"),class:"rounded-md px-4 py-2 transition-all duration-200"},{default:u(()=>[e[13]||(e[13]=i(" Vouchers ",-1)),t("span",ft,d(c.vouchers.length),1)]),_:1},8,["variant"])])]),y.value==="payments"?(l(),r("div",xt,[t("div",_t,[e[21]||(e[21]=t("h3",{class:"mb-4 font-medium"},"Filter Payments",-1)),t("form",{onSubmit:U(T,["prevent"]),class:"space-y-4"},[t("div",vt,[t("div",gt,[n(o(b),{for:"filter-phone"},{default:u(()=>[...e[15]||(e[15]=[i("Phone Number",-1)])]),_:1}),n(o(k),{id:"filter-phone",modelValue:o(a).phone_number,"onUpdate:modelValue":e[4]||(e[4]=s=>o(a).phone_number=s),type:"text",placeholder:"+2348012345678",class:"w-full"},null,8,["modelValue"])]),t("div",yt,[n(o(b),{for:"filter-status"},{default:u(()=>[...e[16]||(e[16]=[i("Status",-1)])]),_:1}),R(t("select",{id:"filter-status","onUpdate:modelValue":e[5]||(e[5]=s=>o(a).status=s),class:"h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background"},[...e[17]||(e[17]=[t("option",{value:""},"All statuses",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"paid"},"Paid",-1),t("option",{value:"fulfilled"},"Fulfilled",-1),t("option",{value:"failed"},"Failed",-1)])],512),[[L,o(a).status]])]),t("div",ht,[n(o(b),{for:"filter-date-from"},{default:u(()=>[...e[18]||(e[18]=[i("Date From",-1)])]),_:1}),n(o(k),{id:"filter-date-from",modelValue:o(a).date_from,"onUpdate:modelValue":e[6]||(e[6]=s=>o(a).date_from=s),type:"date",class:"w-full"},null,8,["modelValue"])]),t("div",bt,[n(o(b),{for:"filter-date-to"},{default:u(()=>[...e[19]||(e[19]=[i("Date To",-1)])]),_:1}),n(o(k),{id:"filter-date-to",modelValue:o(a).date_to,"onUpdate:modelValue":e[7]||(e[7]=s=>o(a).date_to=s),type:"date",class:"w-full"},null,8,["modelValue"])])]),t("div",wt,[n(o(f),{disabled:o(a).processing,type:"submit",class:"min-w-[100px]"},{default:u(()=>[i(d(o(a).processing?"Applying...":"Apply Filters"),1)]),_:1},8,["disabled"]),n(o(f),{type:"button",variant:"outline",onClick:B},{default:u(()=>[...e[20]||(e[20]=[i(" Clear All ",-1)])]),_:1})])],32)]),t("div",kt,[t("div",Vt,[t("table",Ct,[e[23]||(e[23]=t("thead",{class:"border-b bg-muted/50"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Reference "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Phone "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Plan & Amount "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Status "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Voucher "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Paid At ")])],-1)),t("tbody",Ft,[(l(!0),r(w,null,C(c.payments,s=>(l(),r("tr",{key:s.id,class:"group transition-colors hover:bg-muted/30"},[t("td",Pt,[t("div",St,d(s.reference),1)]),t("td",At,[t("div",Ut,d(s.phone_number||"-"),1)]),t("td",jt,[t("div",Nt,[t("div",$t,d(s.plan.name||"Unknown"),1),t("div",Mt," Plan "+d(s.plan.plan_type??"-"),1),t("div",Tt,d(P(s.amount,s.currency)),1)])]),t("td",Bt,[t("span",{class:h(["inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium",S(s.status)])},d(s.status),3)]),t("td",zt,[t("div",Dt,[t("div",Ht,d(s.voucher.code||"Not assigned"),1),s.voucher.status?(l(),r("div",Rt,d(s.voucher.status),1)):m("",!0)])]),t("td",Lt,[t("div",Ot,d(s.paid_at||"-"),1),t("div",qt,d(s.created_at),1)])]))),128)),c.payments.length===0?(l(),r("tr",Et,[...e[22]||(e[22]=[t("td",{colspan:"6",class:"px-6 py-12 text-center"},[t("div",{class:"space-y-2"},[t("div",{class:"mx-auto h-12 w-12 rounded-full bg-muted flex items-center justify-center"},[t("svg",{class:"h-6 w-6 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])]),t("p",{class:"text-muted-foreground"},"No payments found"),t("p",{class:"text-sm text-muted-foreground"},"Try adjusting your filters or check back later")])],-1)])])):m("",!0)])])])])])):(l(),r("div",It,[t("div",Jt,[t("div",Xt,[t("table",Gt,[e[27]||(e[27]=t("thead",{class:"border-b bg-muted/50"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Code "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Plan "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Status "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Payment "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Timeline ")])],-1)),t("tbody",Kt,[(l(!0),r(w,null,C(c.vouchers,s=>(l(),r("tr",{key:s.id,class:"group transition-colors hover:bg-muted/30"},[t("td",Qt,[t("div",Wt,d(s.code),1)]),t("td",Yt,[t("div",Zt,[t("div",te,d(s.plan.name||"Unknown"),1),t("div",ee," Plan "+d(s.plan.plan_type??"-"),1)])]),t("td",se,[t("span",{class:h(["inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium",S(s.status)])},d(s.status),3)]),t("td",oe,[t("div",de,[t("div",re,d(s.payment.reference||"Not assigned"),1),s.payment.status?(l(),r("div",le,d(s.payment.status),1)):m("",!0)])]),t("td",ne,[t("div",ae,[t("div",ie,[e[24]||(e[24]=t("span",{class:"font-medium"},"Reserved:",-1)),i(" "+d(s.reserved_at||"-"),1)]),t("div",ue,[e[25]||(e[25]=t("span",{class:"font-medium"},"Used:",-1)),i(" "+d(s.used_at||"-"),1)]),t("div",ce," Created: "+d(s.created_at),1)])])]))),128)),c.vouchers.length===0?(l(),r("tr",pe,[...e[26]||(e[26]=[t("td",{colspan:"5",class:"px-6 py-12 text-center"},[t("div",{class:"space-y-2"},[t("div",{class:"mx-auto h-12 w-12 rounded-full bg-muted flex items-center justify-center"},[t("svg",{class:"h-6 w-6 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])]),t("p",{class:"text-muted-foreground"},"No vouchers found")])],-1)])])):m("",!0)])])])])]))])])]),_:1})],64))}});export{Ce as default};
