import{d as k,u as V,a as N,c as r,b as c,e as l,h as P,w as _,f as s,g as p,i as w,j as n,o as d,t as o,F as m,r as f}from"./app-DOR4fiWr.js";import{_ as S}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-0ja0RWIf.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-BdYUlP6d.js";import{_ as F}from"./Label.vue_vue_type_script_setup_true_lang-C2dyyXzu.js";import{i as U,_ as $,u as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-CHktiRvU.js";import"./index-B4QcBztZ.js";import"./useForwardExpose-CcT3wbIa.js";import"./VisuallyHidden-DIIiBBWi.js";import"./useForwardPropsEmits-ChgGoYOc.js";import"./index-oviKqIGH.js";import"./createLucideIcon-CIrhyrct.js";const T={class:"flex flex-col gap-6"},R={class:"rounded-xl border border-sidebar-border/70 p-6"},B={class:"grid gap-2"},j={key:0,class:"text-sm text-red-600"},D={key:1,class:"text-sm text-red-600"},J={key:2,class:"text-sm text-green-600"},O={class:"flex items-center gap-3"},X={key:0,class:"text-sm text-muted-foreground"},E={class:"rounded-xl border border-sidebar-border/70 p-6"},I={class:"mt-4 grid gap-4 md:grid-cols-2 lg:grid-cols-3"},L={class:"text-sm text-muted-foreground"},M={class:"mt-1 text-base font-medium"},q={class:"mt-2 text-sm"},z={class:"rounded-xl border border-sidebar-border/70 p-6"},G={class:"mt-4 overflow-x-auto"},H={class:"min-w-full text-left text-sm"},K={class:"px-3 py-2"},Q={class:"px-3 py-2"},W={class:"text-sm"},Y={class:"text-xs text-muted-foreground"},Z={class:"px-3 py-2"},ss={class:"px-3 py-2"},ts={class:"px-3 py-2"},es={class:"text-sm"},os={key:0,class:"text-xs text-muted-foreground"},rs={class:"px-3 py-2"},ds={key:0},ls={class:"rounded-xl border border-sidebar-border/70 p-6"},as={class:"mt-4 overflow-x-auto"},ns={class:"min-w-full text-left text-sm"},is={class:"px-3 py-2"},cs={class:"px-3 py-2"},ps={class:"text-sm"},us={class:"text-xs text-muted-foreground"},xs={class:"px-3 py-2"},ms={class:"px-3 py-2"},_s={class:"text-sm"},fs={key:0,class:"text-xs text-muted-foreground"},hs={class:"px-3 py-2"},ys={class:"px-3 py-2"},bs={key:0},As=k({__name:"Index",props:{plans:{},payments:{},vouchers:{}},setup(y){const i=y,b=[{title:"Voucher Admin",href:U().url}],a=V({file:null}),u=N().props.flash,g=x=>{const e=x.target;a.file=e.files?e.files[0]:null},v=()=>{a.file&&a.post(A().url,{forceFormData:!0,preserveScroll:!0,onFinish:()=>a.reset("file")})},h=(x,e)=>{const t=x/100;return`${e} ${t.toFixed(2)}`};return(x,e)=>(d(),r(m,null,[c(l(P),{title:"Voucher Admin"}),c($,{breadcrumbs:b},{default:_(()=>[s("div",T,[s("div",R,[e[2]||(e[2]=s("h2",{class:"text-lg font-semibold"},"Upload Vouchers",-1)),e[3]||(e[3]=s("p",{class:"mt-2 text-sm text-muted-foreground"},[p(" Upload CSV, JSON, or TXT files. CSV/TXT format: "),s("span",{class:"font-medium"},"code,plan_type"),p(". JSON format: "),s("span",{class:"font-medium"},'[{ "code": "0066983371", "plan_type": 1 }]'),p(". ")],-1)),s("form",{class:"mt-4 flex flex-col gap-4",onSubmit:w(v,["prevent"])},[s("div",B,[c(l(F),{for:"voucher-file"},{default:_(()=>[...e[0]||(e[0]=[p("Voucher File",-1)])]),_:1}),c(l(C),{id:"voucher-file",type:"file",accept:".csv,.json,.txt",onChange:g}),l(a).errors.file?(d(),r("p",j,o(l(a).errors.file),1)):n("",!0),l(u)?.error?(d(),r("p",D,o(l(u).error),1)):n("",!0),l(u)?.success?(d(),r("p",J,o(l(u).success),1)):n("",!0)]),s("div",O,[c(l(S),{disabled:l(a).processing},{default:_(()=>[...e[1]||(e[1]=[p("Upload",-1)])]),_:1},8,["disabled"]),l(a).processing?(d(),r("span",X,"Uploading...")):n("",!0)])],32)]),s("div",E,[e[4]||(e[4]=s("h2",{class:"text-lg font-semibold"},"Plans",-1)),s("div",I,[(d(!0),r(m,null,f(i.plans,t=>(d(),r("div",{key:t.plan_type,class:"rounded-lg border border-sidebar-border/70 p-4"},[s("div",L," Plan "+o(t.plan_type),1),s("div",M,o(t.name),1),s("div",q,o(h(t.amount,t.currency)),1)]))),128))])]),s("div",z,[e[7]||(e[7]=s("h2",{class:"text-lg font-semibold"},"Recent Payments",-1)),s("div",G,[s("table",H,[e[6]||(e[6]=s("thead",{class:"text-xs uppercase text-muted-foreground"},[s("tr",null,[s("th",{class:"px-3 py-2"},"Reference"),s("th",{class:"px-3 py-2"},"Plan"),s("th",{class:"px-3 py-2"},"Amount"),s("th",{class:"px-3 py-2"},"Status"),s("th",{class:"px-3 py-2"},"Voucher"),s("th",{class:"px-3 py-2"},"Paid At")])],-1)),s("tbody",null,[(d(!0),r(m,null,f(i.payments,t=>(d(),r("tr",{key:t.id,class:"border-t border-sidebar-border/70"},[s("td",K,o(t.reference),1),s("td",Q,[s("div",W,o(t.plan.name||"Unknown"),1),s("div",Y," Plan "+o(t.plan.plan_type??"-"),1)]),s("td",Z,o(h(t.amount,t.currency)),1),s("td",ss,o(t.status),1),s("td",ts,[s("div",es,o(t.voucher.code||"Not assigned"),1),t.voucher.status?(d(),r("div",os,o(t.voucher.status),1)):n("",!0)]),s("td",rs,o(t.paid_at||"-"),1)]))),128)),i.payments.length===0?(d(),r("tr",ds,[...e[5]||(e[5]=[s("td",{class:"px-3 py-4 text-center text-sm text-muted-foreground",colspan:"6"}," No payments yet. ",-1)])])):n("",!0)])])])]),s("div",ls,[e[10]||(e[10]=s("h2",{class:"text-lg font-semibold"},"Recent Vouchers",-1)),s("div",as,[s("table",ns,[e[9]||(e[9]=s("thead",{class:"text-xs uppercase text-muted-foreground"},[s("tr",null,[s("th",{class:"px-3 py-2"},"Code"),s("th",{class:"px-3 py-2"},"Plan"),s("th",{class:"px-3 py-2"},"Status"),s("th",{class:"px-3 py-2"},"Payment"),s("th",{class:"px-3 py-2"},"Reserved"),s("th",{class:"px-3 py-2"},"Used")])],-1)),s("tbody",null,[(d(!0),r(m,null,f(i.vouchers,t=>(d(),r("tr",{key:t.id,class:"border-t border-sidebar-border/70"},[s("td",is,o(t.code),1),s("td",cs,[s("div",ps,o(t.plan.name||"Unknown"),1),s("div",us," Plan "+o(t.plan.plan_type??"-"),1)]),s("td",xs,o(t.status),1),s("td",ms,[s("div",_s,o(t.payment.reference||"Not assigned"),1),t.payment.status?(d(),r("div",fs,o(t.payment.status),1)):n("",!0)]),s("td",hs,o(t.reserved_at||"-"),1),s("td",ys,o(t.used_at||"-"),1)]))),128)),i.vouchers.length===0?(d(),r("tr",bs,[...e[8]||(e[8]=[s("td",{class:"px-3 py-4 text-center text-sm text-muted-foreground",colspan:"6"}," No vouchers yet. ",-1)])])):n("",!0)])])])])])]),_:1})],64))}});export{As as default};
