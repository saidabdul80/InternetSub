import{d as k,u as V,a as F,c as d,b as i,e as r,h as N,w as _,f as s,g as c,i as S,j as n,o as l,t as o,F as f,r as h}from"./app-BZGVs6ZZ.js";import{_ as C}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-3MF7e4QC.js";import{_ as P}from"./Input.vue_vue_type_script_setup_true_lang-B5RPmFUz.js";import{_ as w}from"./Label.vue_vue_type_script_setup_true_lang-kBYC90ON.js";import{i as $,_ as A,u as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-D6lAv8TB.js";import"./index-E1JR58X5.js";import"./useForwardExpose-COL_vyrl.js";import"./VisuallyHidden-Dj-d4Qpm.js";import"./useForwardPropsEmits-PW4hz12X.js";import"./index-BDqSilVs.js";import"./createLucideIcon-DQkes-nr.js";const U={class:"flex flex-col gap-6"},B={class:"rounded-xl border border-sidebar-border/70 p-6"},j={class:"grid gap-2"},D={key:0,class:"text-sm text-red-600"},J={key:1,class:"text-sm text-red-600"},O={key:2,class:"text-sm text-green-600"},R={class:"flex items-center gap-3"},X={key:0,class:"text-sm text-muted-foreground"},E={class:"rounded-xl border border-sidebar-border/70 p-6"},I={class:"mt-4 grid gap-4 md:grid-cols-2 lg:grid-cols-3"},L={class:"text-sm text-muted-foreground"},M={class:"mt-1 text-base font-medium"},q={class:"mt-2 text-sm"},z={class:"rounded-xl border border-sidebar-border/70 p-6"},G={class:"mt-4 overflow-x-auto"},H={class:"min-w-full text-left text-sm"},K={class:"px-3 py-2"},Q={class:"px-3 py-2"},W={class:"text-sm"},Y={class:"text-xs text-muted-foreground"},Z={class:"px-3 py-2"},ss={class:"px-3 py-2"},ts={class:"px-3 py-2"},es={class:"text-sm"},os={key:0,class:"text-xs text-muted-foreground"},rs={class:"px-3 py-2"},ds={key:0},gs=k({__name:"Index",props:{plans:{},payments:{}},setup(g){const m=g,b=[{title:"Voucher Admin",href:$().url}],a=V({file:null}),u=F().props.flash,y=p=>{const t=p.target;a.file=t.files?t.files[0]:null},v=()=>{a.file&&a.post(T().url,{forceFormData:!0,preserveScroll:!0,onFinish:()=>a.reset("file")})},x=(p,t)=>{const e=p/100;return`${t} ${e.toFixed(2)}`};return(p,t)=>(l(),d(f,null,[i(r(N),{title:"Voucher Admin"}),i(A,{breadcrumbs:b},{default:_(()=>[s("div",U,[s("div",B,[t[2]||(t[2]=s("h2",{class:"text-lg font-semibold"},"Upload Vouchers",-1)),t[3]||(t[3]=s("p",{class:"mt-2 text-sm text-muted-foreground"},[c(" Upload CSV, JSON, or TXT files. CSV/TXT format: "),s("span",{class:"font-medium"},"code,plan_type"),c(". JSON format: "),s("span",{class:"font-medium"},'[{ "code": "0066983371", "plan_type": 1 }]'),c(". ")],-1)),s("form",{class:"mt-4 flex flex-col gap-4",onSubmit:S(v,["prevent"])},[s("div",j,[i(r(w),{for:"voucher-file"},{default:_(()=>[...t[0]||(t[0]=[c("Voucher File",-1)])]),_:1}),i(r(P),{id:"voucher-file",type:"file",accept:".csv,.json,.txt",onChange:y}),r(a).errors.file?(l(),d("p",D,o(r(a).errors.file),1)):n("",!0),r(u)?.error?(l(),d("p",J,o(r(u).error),1)):n("",!0),r(u)?.success?(l(),d("p",O,o(r(u).success),1)):n("",!0)]),s("div",R,[i(r(C),{disabled:r(a).processing},{default:_(()=>[...t[1]||(t[1]=[c("Upload",-1)])]),_:1},8,["disabled"]),r(a).processing?(l(),d("span",X,"Uploading...")):n("",!0)])],32)]),s("div",E,[t[4]||(t[4]=s("h2",{class:"text-lg font-semibold"},"Plans",-1)),s("div",I,[(l(!0),d(f,null,h(m.plans,e=>(l(),d("div",{key:e.plan_type,class:"rounded-lg border border-sidebar-border/70 p-4"},[s("div",L," Plan "+o(e.plan_type),1),s("div",M,o(e.name),1),s("div",q,o(x(e.amount,e.currency)),1)]))),128))])]),s("div",z,[t[7]||(t[7]=s("h2",{class:"text-lg font-semibold"},"Recent Payments",-1)),s("div",G,[s("table",H,[t[6]||(t[6]=s("thead",{class:"text-xs uppercase text-muted-foreground"},[s("tr",null,[s("th",{class:"px-3 py-2"},"Reference"),s("th",{class:"px-3 py-2"},"Plan"),s("th",{class:"px-3 py-2"},"Amount"),s("th",{class:"px-3 py-2"},"Status"),s("th",{class:"px-3 py-2"},"Voucher"),s("th",{class:"px-3 py-2"},"Paid At")])],-1)),s("tbody",null,[(l(!0),d(f,null,h(m.payments,e=>(l(),d("tr",{key:e.id,class:"border-t border-sidebar-border/70"},[s("td",K,o(e.reference),1),s("td",Q,[s("div",W,o(e.plan.name||"Unknown"),1),s("div",Y," Plan "+o(e.plan.plan_type??"-"),1)]),s("td",Z,o(x(e.amount,e.currency)),1),s("td",ss,o(e.status),1),s("td",ts,[s("div",es,o(e.voucher.code||"Not assigned"),1),e.voucher.status?(l(),d("div",os,o(e.voucher.status),1)):n("",!0)]),s("td",rs,o(e.paid_at||"-"),1)]))),128)),m.payments.length===0?(l(),d("tr",ds,[...t[5]||(t[5]=[s("td",{class:"px-3 py-4 text-center text-sm text-muted-foreground",colspan:"6"}," No payments yet. ",-1)])])):n("",!0)])])])])])]),_:1})],64))}});export{gs as default};
