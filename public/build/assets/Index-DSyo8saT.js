import{d as X,u as P,a as G,c as n,b as i,e as r,h as K,w as c,f as t,g as v,r as j,i as p,t as d,o as a,j as z,n as C,F as S,k as $,l as Q,v as W}from"./app-DMzu69Q5.js";import{_}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-cytzlMix.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-Cq6qtZDh.js";import{_ as F}from"./Label.vue_vue_type_script_setup_true_lang-CYzRoW5O.js";import{i as U,_ as Y,u as Z}from"./AppLayout.vue_vue_type_script_setup_true_lang-DWzurVRN.js";import{a as T,q as B}from"./index-oviKqIGH.js";import"./index-D3evEkOa.js";import"./useForwardExpose-Bqi8_tOR.js";import"./VisuallyHidden-CqWdKH1x.js";import"./useForwardPropsEmits-O5_qlxTS.js";import"./createLucideIcon-Bq4SZYD8.js";const x=(s,l)=>({url:x.url(s,l),method:"post"});x.definition={methods:["post"],url:"/admin/payments/{payment}/reverify"};x.url=(s,l)=>{(typeof s=="string"||typeof s=="number")&&(s={payment:s}),typeof s=="object"&&!Array.isArray(s)&&"id"in s&&(s={payment:s.id}),Array.isArray(s)&&(s={payment:s[0]}),s=T(s);const w={payment:typeof s.payment=="object"?s.payment.id:s.payment};return x.definition.url.replace("{payment}",w.payment.toString()).replace(/\/+$/,"")+B(l)};x.post=(s,l)=>({url:x.url(s,l),method:"post"});const D=(s,l)=>({action:x.url(s,l),method:"post"});D.post=(s,l)=>({action:x.url(s,l),method:"post"});x.form=D;const y=(s,l)=>({url:y.url(s,l),method:"post"});y.definition={methods:["post"],url:"/admin/payments/{payment}/fulfill"};y.url=(s,l)=>{(typeof s=="string"||typeof s=="number")&&(s={payment:s}),typeof s=="object"&&!Array.isArray(s)&&"id"in s&&(s={payment:s.id}),Array.isArray(s)&&(s={payment:s[0]}),s=T(s);const w={payment:typeof s.payment=="object"?s.payment.id:s.payment};return y.definition.url.replace("{payment}",w.payment.toString()).replace(/\/+$/,"")+B(l)};y.post=(s,l)=>({url:y.url(s,l),method:"post"});const H=(s,l)=>({action:y.url(s,l),method:"post"});H.post=(s,l)=>({action:y.url(s,l),method:"post"});y.form=H;const tt={class:"space-y-8 p-4"},et={class:"rounded-2xl transition-all mb-3"},st={class:"flex flex-wrap items-center justify-between gap-4"},ot={class:"ml-2"},rt={class:"ml-2"},lt={key:0,class:"mt-6 space-y-6 shadow-sm p-3"},dt={class:"space-y-4"},nt={class:"mt-2"},it={key:0,class:"mt-2 text-sm text-destructive"},at={class:"flex items-center gap-3"},ut={key:0},pt={key:1},ct={key:0,class:"text-sm text-muted-foreground"},mt={key:0,class:"rounded-2xl border bg-card p-6 shadow-sm"},ft={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},xt={class:"flex items-start justify-between"},yt={class:"flex items-center gap-2"},vt={class:"rounded-full bg-primary/10 px-3 py-1 text-xs font-medium text-primary"},_t={class:"mt-3 text-lg font-semibold"},gt={class:"mt-2 text-2xl font-bold"},ht={class:"rounded-2xl border bg-card p-6 shadow-sm"},bt={class:"flex flex-wrap items-center justify-between gap-4"},wt={class:"inline-flex rounded-lg border p-1"},kt={class:"ml-2 rounded-full bg-primary/20 px-2 py-0.5 text-xs"},Ct={class:"ml-2 rounded-full bg-primary/20 px-2 py-0.5 text-xs"},Ft={key:0,class:"mt-8"},At={class:"mb-6 rounded-lg border bg-muted/30 p-4"},St={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},Vt={class:"space-y-2"},Pt={class:"space-y-2"},jt={class:"space-y-2"},$t={class:"space-y-2"},Ut={class:"flex items-center gap-3"},Nt={class:"overflow-hidden rounded-xl border"},Mt={class:"overflow-x-auto"},zt={class:"w-full min-w-[900px]"},Tt={class:"divide-y"},Bt={class:"px-6 py-4"},Dt={class:"font-mono text-sm font-medium"},Ht={class:"px-6 py-4"},Rt={class:"text-sm"},qt={class:"px-6 py-4"},Lt={class:"space-y-1"},Ot={class:"font-medium"},Et={class:"text-sm text-muted-foreground"},It={class:"font-medium"},Jt={class:"px-6 py-4"},Xt={class:"px-6 py-4"},Gt={class:"space-y-1"},Kt={class:"font-mono text-sm"},Qt={key:0,class:"text-xs text-muted-foreground"},Wt={class:"px-6 py-4"},Yt={class:"text-sm"},Zt={class:"text-xs text-muted-foreground"},te={class:"px-6 py-4"},ee={class:"flex flex-wrap gap-2"},se={key:0},oe={key:1,class:"mt-8"},re={class:"overflow-hidden rounded-xl border"},le={class:"overflow-x-auto"},de={class:"w-full min-w-[900px]"},ne={class:"divide-y"},ie={class:"px-6 py-4"},ae={class:"font-mono font-medium"},ue={class:"px-6 py-4"},pe={class:"space-y-1"},ce={class:"font-medium"},me={class:"text-sm text-muted-foreground"},fe={class:"px-6 py-4"},xe={class:"px-6 py-4"},ye={class:"space-y-1"},ve={class:"font-mono text-sm"},_e={key:0,class:"text-xs text-muted-foreground"},ge={class:"px-6 py-4"},he={class:"space-y-2"},be={class:"text-sm"},we={class:"text-sm"},ke={class:"text-xs text-muted-foreground"},Ce={key:0},Be=X({__name:"Index",props:{plans:{},payments:{},vouchers:{},filters:{}},setup(s){const l=s,w=[{title:"Voucher Admin",href:U().url}],m=P({file:null}),A=P({}),u=P({phone_number:l.filters.phone_number??"",status:l.filters.status??"",date_from:l.filters.date_from??"",date_to:l.filters.date_to??""}),g=G().props.flash,h=j(!1),b=j(!1),k=j("payments"),R=f=>{const e=f.target;m.file=e.files?e.files[0]:null},q=()=>{m.file&&m.post(Z().url,{forceFormData:!0,preserveScroll:!0,onFinish:()=>m.reset("file")})},N=(f,e)=>{const o=f/100;return`${e} ${o.toFixed(2)}`},M=f=>{const e=f.toLowerCase();return e.includes("success")||e.includes("completed")||e==="used"?"bg-green-100 text-green-800 border-green-200":e.includes("pending")||e==="reserved"?"bg-yellow-100 text-yellow-800 border-yellow-200":e.includes("failed")||e.includes("cancelled")?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"},L=()=>{u.get(U().url,{preserveScroll:!0,preserveState:!0,replace:!0})},O=()=>{u.phone_number="",u.status="",u.date_from="",u.date_to="",u.get(U().url,{preserveScroll:!0,replace:!0})},E=f=>{A.submit(x(f),{preserveScroll:!0,preserveState:!0})},I=f=>{A.submit(y(f),{preserveScroll:!0,preserveState:!0})};return(f,e)=>(a(),n(S,null,[i(r(K),{title:"Voucher Admin"}),i(Y,{breadcrumbs:w},{default:c(()=>[t("div",tt,[t("div",et,[t("div",st,[t("div",null,[i(r(_),{type:"button",variant:b.value?"secondary":"default",onClick:e[0]||(e[0]=o=>b.value=!b.value),class:"transition-all duration-200"},{default:c(()=>[p(d(b.value?"Hide Plans":"Show Plans")+" ",1),t("span",ot,d(b.value?"−":"+"),1)]),_:1},8,["variant"])]),i(r(_),{type:"button",variant:h.value?"secondary":"default",onClick:e[1]||(e[1]=o=>h.value=!h.value),class:"transition-all duration-200"},{default:c(()=>[p(d(h.value?"Hide Upload":"Upload Vouchers")+" ",1),t("span",rt,d(h.value?"−":"+"),1)]),_:1},8,["variant"])]),h.value?(a(),n("div",lt,[e[10]||(e[10]=t("div",{class:"rounded-lg bg-gray-200 p-4"},[t("h3",{class:"font-medium"},"File Format Requirements"),t("div",{class:"mt-3 grid gap-4 sm:grid-cols-2"},[t("div",{class:"space-y-2"},[t("p",{class:"text-sm font-medium"},"CSV/TXT Format:"),t("code",{class:"block rounded bg-background px-3 py-2 text-sm font-mono"}," code,plan_type ")]),t("div",{class:"space-y-2"},[t("p",{class:"text-sm font-medium"},"JSON Format:"),t("code",{class:"block rounded bg-background px-3 py-2 text-sm font-mono"},' [{ "code": "0066983371", "plan_type": 1 }] ')])])],-1)),t("form",{class:"space-y-6",onSubmit:z(q,["prevent"])},[t("div",dt,[t("div",null,[i(r(F),{for:"voucher-file",class:"text-base"},{default:c(()=>[...e[8]||(e[8]=[p("Select File",-1)])]),_:1}),t("div",nt,[i(r(V),{id:"voucher-file",type:"file",accept:".csv,.json,.txt",onChange:R,class:"cursor-pointer file:mr-4 file:rounded file:border-0 file:bg-primary file:px-4 file:py-2 file:text-primary-foreground file:cursor-pointer hover:file:bg-primary/90"})]),r(m).errors.file?(a(),n("p",it,d(r(m).errors.file),1)):v("",!0)]),r(g)?.error||r(g)?.success?(a(),n("div",{key:0,class:C(["rounded-lg border p-4",r(g).error?"border-destructive/20 bg-destructive/5":"border-green-200 bg-green-50"])},[t("p",{class:C(["font-medium",r(g).error?"text-destructive":"text-green-800"])},d(r(g).error||r(g).success),3)],2)):v("",!0)]),t("div",at,[i(r(_),{disabled:r(m).processing||!r(m).file,class:C(["min-w-[120px] transition-all duration-200",r(m).file?"hover:shadow-md":""])},{default:c(()=>[r(m).processing?(a(),n("span",ut,[...e[9]||(e[9]=[t("svg",{class:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),p(" Uploading... ",-1)])])):(a(),n("span",pt,"Upload File"))]),_:1},8,["disabled","class"]),r(m).file?v("",!0):(a(),n("p",ct," Select a file to begin upload "))])],32)])):v("",!0)]),b.value?(a(),n("div",mt,[e[11]||(e[11]=t("div",{class:"mb-6"},[t("h2",{class:"text-xl font-semibold"},"Available Plans"),t("p",{class:"mt-1 text-sm text-muted-foreground"}," Overview of all subscription plans ")],-1)),t("div",ft,[(a(!0),n(S,null,$(l.plans,o=>(a(),n("div",{key:o.plan_type,class:"group rounded-xl border border-border bg-background p-5 transition-all duration-200 hover:border-primary/50 hover:shadow-md"},[t("div",xt,[t("div",null,[t("div",yt,[t("span",vt," Plan "+d(o.plan_type),1)]),t("h3",_t,d(o.name),1),t("p",gt,d(N(o.amount,o.currency)),1)])])]))),128))])])):v("",!0),t("div",ht,[t("div",bt,[e[14]||(e[14]=t("div",null,[t("h2",{class:"text-xl font-semibold"},"Recent Activity"),t("p",{class:"mt-1 text-sm text-muted-foreground"}," Monitor payments and voucher usage in real-time ")],-1)),t("div",wt,[i(r(_),{type:"button",variant:k.value==="payments"?"default":"ghost",onClick:e[2]||(e[2]=o=>k.value="payments"),class:"rounded-md px-4 py-2 transition-all duration-200"},{default:c(()=>[e[12]||(e[12]=p(" Payments ",-1)),t("span",kt,d(l.payments.length),1)]),_:1},8,["variant"]),i(r(_),{type:"button",variant:k.value==="vouchers"?"default":"ghost",onClick:e[3]||(e[3]=o=>k.value="vouchers"),class:"rounded-md px-4 py-2 transition-all duration-200"},{default:c(()=>[e[13]||(e[13]=p(" Vouchers ",-1)),t("span",Ct,d(l.vouchers.length),1)]),_:1},8,["variant"])])]),k.value==="payments"?(a(),n("div",Ft,[t("div",At,[e[21]||(e[21]=t("h3",{class:"mb-4 font-medium"},"Filter Payments",-1)),t("form",{onSubmit:z(L,["prevent"]),class:"space-y-4"},[t("div",St,[t("div",Vt,[i(r(F),{for:"filter-phone"},{default:c(()=>[...e[15]||(e[15]=[p("Phone Number",-1)])]),_:1}),i(r(V),{id:"filter-phone",modelValue:r(u).phone_number,"onUpdate:modelValue":e[4]||(e[4]=o=>r(u).phone_number=o),type:"text",placeholder:"+2348012345678",class:"w-full"},null,8,["modelValue"])]),t("div",Pt,[i(r(F),{for:"filter-status"},{default:c(()=>[...e[16]||(e[16]=[p("Status",-1)])]),_:1}),Q(t("select",{id:"filter-status","onUpdate:modelValue":e[5]||(e[5]=o=>r(u).status=o),class:"h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background"},[...e[17]||(e[17]=[t("option",{value:""},"All statuses",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"paid"},"Paid",-1),t("option",{value:"fulfilled"},"Fulfilled",-1),t("option",{value:"failed"},"Failed",-1)])],512),[[W,r(u).status]])]),t("div",jt,[i(r(F),{for:"filter-date-from"},{default:c(()=>[...e[18]||(e[18]=[p("Date From",-1)])]),_:1}),i(r(V),{id:"filter-date-from",modelValue:r(u).date_from,"onUpdate:modelValue":e[6]||(e[6]=o=>r(u).date_from=o),type:"date",class:"w-full"},null,8,["modelValue"])]),t("div",$t,[i(r(F),{for:"filter-date-to"},{default:c(()=>[...e[19]||(e[19]=[p("Date To",-1)])]),_:1}),i(r(V),{id:"filter-date-to",modelValue:r(u).date_to,"onUpdate:modelValue":e[7]||(e[7]=o=>r(u).date_to=o),type:"date",class:"w-full"},null,8,["modelValue"])])]),t("div",Ut,[i(r(_),{disabled:r(u).processing,type:"submit",class:"min-w-[100px]"},{default:c(()=>[p(d(r(u).processing?"Applying...":"Apply Filters"),1)]),_:1},8,["disabled"]),i(r(_),{type:"button",variant:"outline",onClick:O},{default:c(()=>[...e[20]||(e[20]=[p(" Clear All ",-1)])]),_:1})])],32)]),t("div",Nt,[t("div",Mt,[t("table",zt,[e[25]||(e[25]=t("thead",{class:"border-b bg-muted/50"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Reference "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Phone "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Plan & Amount "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Status "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Voucher "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Paid At "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Actions ")])],-1)),t("tbody",Tt,[(a(!0),n(S,null,$(l.payments,o=>(a(),n("tr",{key:o.id,class:"group transition-colors hover:bg-muted/30"},[t("td",Bt,[t("div",Dt,d(o.reference),1)]),t("td",Ht,[t("div",Rt,d(o.phone_number||"-"),1)]),t("td",qt,[t("div",Lt,[t("div",Ot,d(o.plan.name||"Unknown"),1),t("div",Et," Plan "+d(o.plan.plan_type??"-"),1),t("div",It,d(N(o.amount,o.currency)),1)])]),t("td",Jt,[t("span",{class:C(["inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium",M(o.status)])},d(o.status),3)]),t("td",Xt,[t("div",Gt,[t("div",Kt,d(o.voucher.code||"Not assigned"),1),o.voucher.status?(a(),n("div",Qt,d(o.voucher.status),1)):v("",!0)])]),t("td",Wt,[t("div",Yt,d(o.paid_at||"-"),1),t("div",Zt,d(o.created_at),1)]),t("td",te,[t("div",ee,[i(r(_),{type:"button",size:"sm",variant:"outline",disabled:r(A).processing,onClick:J=>E(o.id)},{default:c(()=>[...e[22]||(e[22]=[p(" Reverify ",-1)])]),_:1},8,["disabled","onClick"]),i(r(_),{type:"button",size:"sm",disabled:r(A).processing,onClick:J=>I(o.id)},{default:c(()=>[...e[23]||(e[23]=[p(" Mark Fulfilled ",-1)])]),_:1},8,["disabled","onClick"])])])]))),128)),l.payments.length===0?(a(),n("tr",se,[...e[24]||(e[24]=[t("td",{colspan:"7",class:"px-6 py-12 text-center"},[t("div",{class:"space-y-2"},[t("div",{class:"mx-auto h-12 w-12 rounded-full bg-muted flex items-center justify-center"},[t("svg",{class:"h-6 w-6 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])]),t("p",{class:"text-muted-foreground"},"No payments found"),t("p",{class:"text-sm text-muted-foreground"},"Try adjusting your filters or check back later")])],-1)])])):v("",!0)])])])])])):(a(),n("div",oe,[t("div",re,[t("div",le,[t("table",de,[e[29]||(e[29]=t("thead",{class:"border-b bg-muted/50"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Code "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Plan "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Status "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Payment "),t("th",{class:"px-6 py-4 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Timeline ")])],-1)),t("tbody",ne,[(a(!0),n(S,null,$(l.vouchers,o=>(a(),n("tr",{key:o.id,class:"group transition-colors hover:bg-muted/30"},[t("td",ie,[t("div",ae,d(o.code),1)]),t("td",ue,[t("div",pe,[t("div",ce,d(o.plan.name||"Unknown"),1),t("div",me," Plan "+d(o.plan.plan_type??"-"),1)])]),t("td",fe,[t("span",{class:C(["inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium",M(o.status)])},d(o.status),3)]),t("td",xe,[t("div",ye,[t("div",ve,d(o.payment.reference||"Not assigned"),1),o.payment.status?(a(),n("div",_e,d(o.payment.status),1)):v("",!0)])]),t("td",ge,[t("div",he,[t("div",be,[e[26]||(e[26]=t("span",{class:"font-medium"},"Reserved:",-1)),p(" "+d(o.reserved_at||"-"),1)]),t("div",we,[e[27]||(e[27]=t("span",{class:"font-medium"},"Used:",-1)),p(" "+d(o.used_at||"-"),1)]),t("div",ke," Created: "+d(o.created_at),1)])])]))),128)),l.vouchers.length===0?(a(),n("tr",Ce,[...e[28]||(e[28]=[t("td",{colspan:"5",class:"px-6 py-12 text-center"},[t("div",{class:"space-y-2"},[t("div",{class:"mx-auto h-12 w-12 rounded-full bg-muted flex items-center justify-center"},[t("svg",{class:"h-6 w-6 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])]),t("p",{class:"text-muted-foreground"},"No vouchers found")])],-1)])])):v("",!0)])])])])]))])])]),_:1})],64))}});export{Be as default};
